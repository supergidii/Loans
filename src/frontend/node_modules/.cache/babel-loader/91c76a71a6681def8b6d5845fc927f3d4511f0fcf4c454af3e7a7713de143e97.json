{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/UPFRONT/Documents/newprol/src/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/UPFRONT/Documents/newprol/src/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport axios from 'axios';\nexport default {\n  namespaced: true,\n  state: {\n    token: localStorage.getItem('token') || null,\n    user: JSON.parse(localStorage.getItem('user')) || null\n  },\n  mutations: {\n    SET_TOKEN: function SET_TOKEN(state, token) {\n      state.token = token;\n      if (token) {\n        localStorage.setItem('token', token);\n      } else {\n        localStorage.removeItem('token');\n      }\n    },\n    SET_USER: function SET_USER(state, user) {\n      state.user = user;\n      if (user) {\n        localStorage.setItem('user', JSON.stringify(user));\n      } else {\n        localStorage.removeItem('user');\n      }\n    }\n  },\n  actions: {\n    login: function login(_ref, credentials) {\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var commit, response, _response$data, token, user;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              commit = _ref.commit;\n              _context.prev = 1;\n              _context.next = 4;\n              return axios.post('/api/auth/login', credentials);\n            case 4:\n              response = _context.sent;\n              _response$data = response.data, token = _response$data.token, user = _response$data.user;\n              commit('SET_TOKEN', token);\n              commit('SET_USER', user);\n              return _context.abrupt(\"return\", user);\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](1);\n              throw _context.t0;\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[1, 11]]);\n      }))();\n    },\n    register: function register(_ref2, userData) {\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var commit, response, _response$data2, token, user;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              commit = _ref2.commit;\n              _context2.prev = 1;\n              _context2.next = 4;\n              return axios.post('/api/auth/register', userData);\n            case 4:\n              response = _context2.sent;\n              _response$data2 = response.data, token = _response$data2.token, user = _response$data2.user;\n              commit('SET_TOKEN', token);\n              commit('SET_USER', user);\n              return _context2.abrupt(\"return\", user);\n            case 11:\n              _context2.prev = 11;\n              _context2.t0 = _context2[\"catch\"](1);\n              throw _context2.t0;\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[1, 11]]);\n      }))();\n    },\n    logout: function logout(_ref3) {\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var commit;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              commit = _ref3.commit;\n              commit('SET_TOKEN', null);\n              commit('SET_USER', null);\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3);\n      }))();\n    },\n    fetchUser: function fetchUser(_ref4) {\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var commit, response;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              commit = _ref4.commit;\n              _context4.prev = 1;\n              _context4.next = 4;\n              return axios.get('/api/auth/user');\n            case 4:\n              response = _context4.sent;\n              commit('SET_USER', response.data);\n              return _context4.abrupt(\"return\", response.data);\n            case 9:\n              _context4.prev = 9;\n              _context4.t0 = _context4[\"catch\"](1);\n              commit('SET_TOKEN', null);\n              commit('SET_USER', null);\n              throw _context4.t0;\n            case 14:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, null, [[1, 9]]);\n      }))();\n    }\n  },\n  getters: {\n    isAuthenticated: function isAuthenticated(state) {\n      return !!state.token;\n    },\n    user: function user(state) {\n      return state.user;\n    },\n    token: function token(state) {\n      return state.token;\n    }\n  }\n};","map":{"version":3,"names":["axios","namespaced","state","token","localStorage","getItem","user","JSON","parse","mutations","SET_TOKEN","setItem","removeItem","SET_USER","stringify","actions","login","_ref","credentials","_asyncToGenerator","_regeneratorRuntime","mark","_callee","commit","response","_response$data","wrap","_callee$","_context","prev","next","post","sent","data","abrupt","t0","stop","register","_ref2","userData","_callee2","_response$data2","_callee2$","_context2","logout","_ref3","_callee3","_callee3$","_context3","fetchUser","_ref4","_callee4","_callee4$","_context4","get","getters","isAuthenticated"],"sources":["C:/Users/UPFRONT/Documents/newprol/src/frontend/src/store/modules/auth.js"],"sourcesContent":["import axios from 'axios'\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state: {\r\n    token: localStorage.getItem('token') || null,\r\n    user: JSON.parse(localStorage.getItem('user')) || null\r\n  },\r\n  mutations: {\r\n    SET_TOKEN(state, token) {\r\n      state.token = token\r\n      if (token) {\r\n        localStorage.setItem('token', token)\r\n      } else {\r\n        localStorage.removeItem('token')\r\n      }\r\n    },\r\n    SET_USER(state, user) {\r\n      state.user = user\r\n      if (user) {\r\n        localStorage.setItem('user', JSON.stringify(user))\r\n      } else {\r\n        localStorage.removeItem('user')\r\n      }\r\n    }\r\n  },\r\n  actions: {\r\n    async login({ commit }, credentials) {\r\n      try {\r\n        const response = await axios.post('/api/auth/login', credentials)\r\n        const { token, user } = response.data\r\n        commit('SET_TOKEN', token)\r\n        commit('SET_USER', user)\r\n        return user\r\n      } catch (error) {\r\n        throw error\r\n      }\r\n    },\r\n    async register({ commit }, userData) {\r\n      try {\r\n        const response = await axios.post('/api/auth/register', userData)\r\n        const { token, user } = response.data\r\n        commit('SET_TOKEN', token)\r\n        commit('SET_USER', user)\r\n        return user\r\n      } catch (error) {\r\n        throw error\r\n      }\r\n    },\r\n    async logout({ commit }) {\r\n      commit('SET_TOKEN', null)\r\n      commit('SET_USER', null)\r\n    },\r\n    async fetchUser({ commit }) {\r\n      try {\r\n        const response = await axios.get('/api/auth/user')\r\n        commit('SET_USER', response.data)\r\n        return response.data\r\n      } catch (error) {\r\n        commit('SET_TOKEN', null)\r\n        commit('SET_USER', null)\r\n        throw error\r\n      }\r\n    }\r\n  },\r\n  getters: {\r\n    isAuthenticated: state => !!state.token,\r\n    user: state => state.user,\r\n    token: state => state.token\r\n  }\r\n} "],"mappings":";;;;;AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,eAAe;EACbC,UAAU,EAAE,IAAI;EAChBC,KAAK,EAAE;IACLC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,IAAI,IAAI;IAC5CC,IAAI,EAAEC,IAAI,CAACC,KAAK,CAACJ,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI;EACpD,CAAC;EACDI,SAAS,EAAE;IACTC,SAAS,WAATA,SAASA,CAACR,KAAK,EAAEC,KAAK,EAAE;MACtBD,KAAK,CAACC,KAAK,GAAGA,KAAK;MACnB,IAAIA,KAAK,EAAE;QACTC,YAAY,CAACO,OAAO,CAAC,OAAO,EAAER,KAAK,CAAC;MACtC,CAAC,MAAM;QACLC,YAAY,CAACQ,UAAU,CAAC,OAAO,CAAC;MAClC;IACF,CAAC;IACDC,QAAQ,WAARA,QAAQA,CAACX,KAAK,EAAEI,IAAI,EAAE;MACpBJ,KAAK,CAACI,IAAI,GAAGA,IAAI;MACjB,IAAIA,IAAI,EAAE;QACRF,YAAY,CAACO,OAAO,CAAC,MAAM,EAAEJ,IAAI,CAACO,SAAS,CAACR,IAAI,CAAC,CAAC;MACpD,CAAC,MAAM;QACLF,YAAY,CAACQ,UAAU,CAAC,MAAM,CAAC;MACjC;IACF;EACF,CAAC;EACDG,OAAO,EAAE;IACDC,KAAK,WAALA,KAAKA,CAAAC,IAAA,EAAaC,WAAW,EAAE;MAAA,OAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,MAAA,EAAAC,QAAA,EAAAC,cAAA,EAAAtB,KAAA,EAAAG,IAAA;QAAA,OAAAc,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAvBP,MAAM,GAAAN,IAAA,CAANM,MAAM;cAAAK,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAE,IAAA;cAAA,OAEO9B,KAAK,CAAC+B,IAAI,CAAC,iBAAiB,EAAEb,WAAW,CAAC;YAAA;cAA3DM,QAAQ,GAAAI,QAAA,CAAAI,IAAA;cAAAP,cAAA,GACUD,QAAQ,CAACS,IAAI,EAA7B9B,KAAK,GAAAsB,cAAA,CAALtB,KAAK,EAAEG,IAAI,GAAAmB,cAAA,CAAJnB,IAAI;cACnBiB,MAAM,CAAC,WAAW,EAAEpB,KAAK,CAAC;cAC1BoB,MAAM,CAAC,UAAU,EAAEjB,IAAI,CAAC;cAAA,OAAAsB,QAAA,CAAAM,MAAA,WACjB5B,IAAI;YAAA;cAAAsB,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAO,EAAA,GAAAP,QAAA;cAAA,MAAAA,QAAA,CAAAO,EAAA;YAAA;YAAA;cAAA,OAAAP,QAAA,CAAAQ,IAAA;UAAA;QAAA,GAAAd,OAAA;MAAA;IAIf,CAAC;IACKe,QAAQ,WAARA,QAAQA,CAAAC,KAAA,EAAaC,QAAQ,EAAE;MAAA,OAAApB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,UAAAmB,SAAA;QAAA,IAAAjB,MAAA,EAAAC,QAAA,EAAAiB,eAAA,EAAAtC,KAAA,EAAAG,IAAA;QAAA,OAAAc,mBAAA,GAAAM,IAAA,UAAAgB,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAAd,IAAA,GAAAc,SAAA,CAAAb,IAAA;YAAA;cAApBP,MAAM,GAAAe,KAAA,CAANf,MAAM;cAAAoB,SAAA,CAAAd,IAAA;cAAAc,SAAA,CAAAb,IAAA;cAAA,OAEI9B,KAAK,CAAC+B,IAAI,CAAC,oBAAoB,EAAEQ,QAAQ,CAAC;YAAA;cAA3Df,QAAQ,GAAAmB,SAAA,CAAAX,IAAA;cAAAS,eAAA,GACUjB,QAAQ,CAACS,IAAI,EAA7B9B,KAAK,GAAAsC,eAAA,CAALtC,KAAK,EAAEG,IAAI,GAAAmC,eAAA,CAAJnC,IAAI;cACnBiB,MAAM,CAAC,WAAW,EAAEpB,KAAK,CAAC;cAC1BoB,MAAM,CAAC,UAAU,EAAEjB,IAAI,CAAC;cAAA,OAAAqC,SAAA,CAAAT,MAAA,WACjB5B,IAAI;YAAA;cAAAqC,SAAA,CAAAd,IAAA;cAAAc,SAAA,CAAAR,EAAA,GAAAQ,SAAA;cAAA,MAAAA,SAAA,CAAAR,EAAA;YAAA;YAAA;cAAA,OAAAQ,SAAA,CAAAP,IAAA;UAAA;QAAA,GAAAI,QAAA;MAAA;IAIf,CAAC;IACKI,MAAM,WAANA,MAAMA,CAAAC,KAAA,EAAa;MAAA,OAAA1B,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,UAAAyB,SAAA;QAAA,IAAAvB,MAAA;QAAA,OAAAH,mBAAA,GAAAM,IAAA,UAAAqB,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAAnB,IAAA,GAAAmB,SAAA,CAAAlB,IAAA;YAAA;cAAVP,MAAM,GAAAsB,KAAA,CAANtB,MAAM;cACnBA,MAAM,CAAC,WAAW,EAAE,IAAI,CAAC;cACzBA,MAAM,CAAC,UAAU,EAAE,IAAI,CAAC;YAAA;YAAA;cAAA,OAAAyB,SAAA,CAAAZ,IAAA;UAAA;QAAA,GAAAU,QAAA;MAAA;IAC1B,CAAC;IACKG,SAAS,WAATA,SAASA,CAAAC,KAAA,EAAa;MAAA,OAAA/B,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,UAAA8B,SAAA;QAAA,IAAA5B,MAAA,EAAAC,QAAA;QAAA,OAAAJ,mBAAA,GAAAM,IAAA,UAAA0B,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAAxB,IAAA,GAAAwB,SAAA,CAAAvB,IAAA;YAAA;cAAVP,MAAM,GAAA2B,KAAA,CAAN3B,MAAM;cAAA8B,SAAA,CAAAxB,IAAA;cAAAwB,SAAA,CAAAvB,IAAA;cAAA,OAEG9B,KAAK,CAACsD,GAAG,CAAC,gBAAgB,CAAC;YAAA;cAA5C9B,QAAQ,GAAA6B,SAAA,CAAArB,IAAA;cACdT,MAAM,CAAC,UAAU,EAAEC,QAAQ,CAACS,IAAI,CAAC;cAAA,OAAAoB,SAAA,CAAAnB,MAAA,WAC1BV,QAAQ,CAACS,IAAI;YAAA;cAAAoB,SAAA,CAAAxB,IAAA;cAAAwB,SAAA,CAAAlB,EAAA,GAAAkB,SAAA;cAEpB9B,MAAM,CAAC,WAAW,EAAE,IAAI,CAAC;cACzBA,MAAM,CAAC,UAAU,EAAE,IAAI,CAAC;cAAA,MAAA8B,SAAA,CAAAlB,EAAA;YAAA;YAAA;cAAA,OAAAkB,SAAA,CAAAjB,IAAA;UAAA;QAAA,GAAAe,QAAA;MAAA;IAG5B;EACF,CAAC;EACDI,OAAO,EAAE;IACPC,eAAe,EAAE,SAAjBA,eAAeA,CAAEtD,KAAK;MAAA,OAAI,CAAC,CAACA,KAAK,CAACC,KAAK;IAAA;IACvCG,IAAI,EAAE,SAANA,IAAIA,CAAEJ,KAAK;MAAA,OAAIA,KAAK,CAACI,IAAI;IAAA;IACzBH,KAAK,EAAE,SAAPA,KAAKA,CAAED,KAAK;MAAA,OAAIA,KAAK,CAACC,KAAK;IAAA;EAC7B;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}